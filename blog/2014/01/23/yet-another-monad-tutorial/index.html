
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Yet Another Monad Tutorial in 15 Minutes - Carpe diem (Felix's blog)</title>
  <meta name="author" content="dryman (Felix Ren-Chyan Chern)">

  
  <meta name="description" content="Functional programming has become popular these days, but unlike object-oriented languages, each FP language is so different from the other. Some of &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.idryman.org/blog/2014/01/23/yet-another-monad-tutorial/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Carpe diem (Felix's blog)" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-23425996-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <!--div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">mob</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div-->
  <h1><a href="/">Carpe diem (Felix's blog)</a></h1>
  
    <h2>I am a happy developer</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.idryman.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about-me">About Me</a></li>
  <li><a href="http://idryman.tumblr.com/">Drawings</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Yet Another Monad Tutorial in 15 Minutes</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2014-01-23T19:21:00-08:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Functional programming has become popular these days, but unlike object-oriented languages, each FP language is so different from the other. Some of these use strict evaluation while others use lazily evaluated models; tons of new concurrent models were introduced; further more, states are handled differently too.</p>

<p>Haskell, for example, does not have states, but uses its powerful type system to construct the stateful program flow normally used in other languages. As you might guess, Monad is one of the type that does the trick. Defining a Monad type is pretty much like defining a class in an object oriented language. However, Monad can do much more than a class. It’s a type that can be used for exception handling, constructing parallel program workflow or even a parser generator!</p>

<p>By learning Monad, You’ll know a different perspective of how to program, and rethink the composition of data logic beyond the object-oriented programming kingdom.</p>

<!--more-->

<h2 id="what-is-a-type">What is a type</h2>

<p>Before we jump into Monad itself, let’s quickly go through the type systems. What is a type? We usually think of type as a static thing like <code>int</code> or <code>float</code>, but actually, type is more dynamic; <strong>types are the rules associated with the data, not the actual data itself</strong>. It is important to remember this point.</p>

<p>For example, an <code>int</code> is treated as <code>int</code> only when you use <code>addl</code> CPU instruction to present <code>+</code> operation on a 64 bit machine. On the other hand, <code>float</code> uses <code>addss</code> the instruction for <code>+</code> and <code>%xmm</code> registers for computations. It’s the <em>rules</em>, or the <em>generated instructions</em>, that define the type.</p>

<p>The whole concept of Object-Oriented Programming is to let you use classes/interfaces to define types, the rules (methods) that interacts with the actual data. For more advanced needs people use templates(c++) or generics(java) to define more abstracted rules that are more reusable. Monad, is pretty much like that generic class.</p>

<p>Now we understand what a type is; it’s just a set of rules, or methods in Object-Oriented terms. A Monad, is just yet another type, and the definition of this type is defined by four rules:</p>

<ol>
  <li>bind <code>(&gt;&gt;=)</code></li>
  <li>then <code>(&gt;&gt;)</code></li>
  <li><code>return</code></li>
  <li><code>fail</code></li>
</ol>

<p>By going through these four rules and looking at the examples below, you’ll understand what a Monad is and why is it so awesome and powerful!</p>

<h2 id="monad-lesson-1-the-bind-operator-">Monad lesson 1: the bind operator <code>(&gt;&gt;=)</code></h2>

<p>The Monad bind operator is a function type signature. A type signature is like an abstract method defined in an abstract class:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">class</span>  <span class="kt">Monad</span> <span class="n">m</span>  <span class="kr">where</span>
</span><span class="line">    <span class="p">(</span><span class="o">&gt;&gt;=</span><span class="p">)</span> <span class="ow">::</span> <span class="n">m</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You may not familiar with Haskell syntax, but actually it’s pretty straight forward.</p>

<p><img width="60%" style="margin-left:20%;" src="/images/monad/type-signature.png" /></p>

<p>It takes 2 inputs and returns an output.</p>

<ol>
  <li>
    <p>A Monad that contains type <code>a</code> as the first input</p>
  </li>
  <li>
    <p>A function <code>(a -&gt; m b)</code> as the second input. <code>(a -&gt; m b)</code> is a first order function that takes <code>a</code> as input, and returns Monad <code>m b</code>. You can think of this as a delegate design pattern in Object-Oriented world, except you don’t need to pass in a whole object, but only a function itself is sufficient.</p>
  </li>
  <li>
    <p>The implementation will return Monad <code>m b</code> as a result.</p>
  </li>
</ol>

<p><img width="50%" style="margin-left:25%;" src="/images/monad/monad-structure.png" /></p>

<p>Why is this definition powerful? Well, one benefit is that you can wrap common logic in Monad and save yourself time.</p>

<hr />

<h2 id="application-1-exception-handling">Application 1: exception handling</h2>

<p>Exception handling is always a pain in the ass. Lets demonstrate how to use a Monad to reduce the code size and un-nest if-else blocks.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="c"><span class="line"><span class="kt">int</span> <span class="n">errno</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="line"><span class="k">if</span> <span class="p">(</span><span class="n">errno</span> <span class="o">=</span> <span class="n">io_function1</span><span class="p">(</span> <span class="n">input1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">output1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="cm">/* do some logic */</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="n">errno</span> <span class="o">=</span> <span class="n">io_function2</span><span class="p">(</span> <span class="n">input2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">output2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="cm">/*</span>
</span><span class="line"><span class="cm">         * some more logic</span>
</span><span class="line"><span class="cm">         * and maybe more nested functions</span>
</span><span class="line"><span class="cm">         */</span>
</span><span class="line">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">      <span class="cm">/* handle error 2 */</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">    <span class="cm">/* handle error 1 */</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<!-- need to fix this part -->
<p>There’s nothing wrong with nested if-else blocks. The logic is straightforward and easy to understand. To un-nest the if-else statements, there are several ways to do it. You can either use a <code>goto</code> statement and pass the control to a barrier label, or use try-catch block in C++ or a similar language that supports it. Or, here comes the Maybe Monad for the rescue!</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">data</span>  <span class="kt">Maybe</span> <span class="n">a</span>  <span class="ow">=</span>  <span class="kt">Nothing</span> <span class="o">|</span> <span class="kt">Just</span> <span class="n">a</span>
</span><span class="line">
</span><span class="line"><span class="kr">instance</span>  <span class="kt">Monad</span> <span class="kt">Maybe</span>  <span class="kr">where</span>
</span><span class="line">    <span class="p">(</span><span class="kt">Just</span> <span class="n">x</span><span class="p">)</span> <span class="o">&gt;&gt;=</span> <span class="n">k</span>      <span class="ow">=</span> <span class="n">k</span> <span class="n">x</span>
</span><span class="line">    <span class="kt">Nothing</span>  <span class="o">&gt;&gt;=</span> <span class="kr">_</span>      <span class="ow">=</span> <span class="kt">Nothing</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>A Maybe Monad has two constructors: <code>Nothing</code> and <code>Just a</code>. It’s a simple kind of error Monad, where all errors are represented by <code>Nothing</code>. The rules are simple:</p>

<ol>
  <li>If the first input <code>M a</code> is <code>Just x</code>, run the second input (the function) with value <code>x</code></li>
  <li>If the first input is <code>Nothing</code>, just return <code>Nothing</code></li>
</ol>

<p>When you combine several Maybe Monad handling functions together, if one of the upstream function went wrong by returning <code>Nothing</code>, all the downstream function(s) won’t be executed.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="nf">maybeHalf</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Maybe</span> <span class="kt">Int</span>         <span class="c1">-- Haskell type definition</span>
</span><span class="line"><span class="nf">maybeHalf</span> <span class="n">a</span>                           <span class="c1">-- Actual function body</span>
</span><span class="line">         <span class="o">|</span> <span class="n">even</span> <span class="n">a</span> <span class="ow">=</span> <span class="kt">Just</span> <span class="p">(</span><span class="n">div</span> <span class="n">a</span> <span class="mi">2</span><span class="p">)</span>
</span><span class="line">         <span class="o">|</span> <span class="n">otherwise</span> <span class="ow">=</span> <span class="kt">Nothing</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The first line is Haskell function type definition. <code>maybeHalf</code> takes an <code>Int</code> and returns <code>Maybe Int</code> type. Other than that, the function body tells us:</p>

<ol>
  <li>
    <p>If input <code>a</code> is even, return <code>a / 2</code> wrapped in <code>Maybe</code> Monad constructor <code>Just</code>.</p>
  </li>
  <li>
    <p>Otherwise, return <code>Maybe</code> Monad constructor <code>Nothing</code>.</p>
  </li>
</ol>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="kt">Just</span> <span class="mi">10</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span>
</span><span class="line"><span class="kt">Just</span> <span class="mi">5</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="kt">Just</span> <span class="mi">10</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span>
</span><span class="line"><span class="kt">Nothing</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="kt">Just</span> <span class="mi">10</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span> <span class="o">&gt;&gt;=</span> <span class="n">maybeHalf</span>
</span><span class="line"><span class="kt">Nothing</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Cool, now the nested if-else logic is replaced! What do we learn from this?</p>

<ol>
  <li>
    <p>Error handling if-else logic is encapsulated from the user.</p>
  </li>
  <li>
    <p>User can use the defined data type <code>Just a</code> or <code>Nothing</code> to <strong>lift</strong> the information (correct or error) to upper Monad.</p>
  </li>
</ol>

<p>A programming language’s type system deeply colors the way we think and write code in that language.
In the object-oriented kingdom, we use objects to encapsulate error messages,
and then code the program to throw the exception upwards and hopefully the try-catch block will capture it and handle the error gracefully.
In contrast, you can use a type to build the try-catch block, and also encapsulate error or success state!</p>

<h2 id="application-2-accumulate-states">Application 2: accumulate states</h2>

<p>So far, we’ve seen that Monad can help us wrap common (usually nested) logic into a type.
User can <strong>lift</strong> the data to the upward Monad, and Monad will do the if-else logic for you.
Nevertheless, Monad can do more for you! <code>Maybe</code> Monad only passes the data to the next
user defined function, and here we introduce the <code>Writer</code> Monad, which will accumulate the
data you lift to it.</p>

<h4 id="writer-monad-type-definition">Writer Monad, type definition</h4>

<p>Here is the type definition of Writer Monad:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">instance</span> <span class="p">(</span><span class="kt">Monoid</span> <span class="n">w</span><span class="p">)</span> <span class="ow">=&gt;</span> <span class="kt">Monad</span> <span class="p">(</span><span class="kt">Writer</span> <span class="n">w</span><span class="p">)</span> <span class="kr">where</span>
</span><span class="line">    <span class="n">return</span> <span class="n">x</span> <span class="ow">=</span> <span class="kt">Writer</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mempty</span><span class="p">)</span>
</span><span class="line">    <span class="p">(</span><span class="kt">Writer</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">v</span><span class="p">))</span> <span class="o">&gt;&gt;=</span> <span class="n">f</span> <span class="ow">=</span> <span class="kr">let</span> <span class="p">(</span><span class="kt">Writer</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">v&#39;</span><span class="p">))</span> <span class="ow">=</span> <span class="n">f</span> <span class="n">x</span> <span class="kr">in</span> <span class="kt">Writer</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">v</span> <span class="p">`</span><span class="n">mappend</span><span class="p">`</span> <span class="n">v&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Don’t be scared! Writer Monad uses <code>Monoid</code> to concat the data you lift to it.
<code>Monoid</code> defines <code>mempty</code> and <code>mappend</code> functions. <code>mappend</code>, as it’s name suggests, appends
the data you passed to it; and <code>mempty</code> is just an empty element.
<code>mappend</code> and <code>mempty</code> are just abstract ways to merge data together.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kt">Prelude</span> <span class="kt">Data</span><span class="o">.</span><span class="kt">Monoid</span><span class="o">&gt;</span> <span class="n">mappend</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
</span><span class="line"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
</span><span class="line"><span class="kt">Prelude</span> <span class="kt">Data</span><span class="o">.</span><span class="kt">Monoid</span><span class="o">&gt;</span> <span class="n">mappend</span> <span class="s">&quot;hello &quot;</span> <span class="s">&quot;world&quot;</span>
</span><span class="line"><span class="s">&quot;hello world&quot;</span>
</span><span class="line"><span class="kt">Prelude</span> <span class="kt">Data</span><span class="o">.</span><span class="kt">Monoid</span><span class="o">&gt;</span> <span class="n">mappend</span> <span class="s">&quot;hello &quot;</span> <span class="n">mempty</span>
</span><span class="line"><span class="s">&quot;hello &quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The Writer Monad’s definition simply takes the return value of user defined function <code>f</code>, extracts
the value <code>v'</code> out of it, and uses <code>mappend</code> to append the old <code>v</code> and new <code>v'</code>.</p>

<h4 id="writer-monad-in-action">Writer Monad, in action</h4>

<p>Let me take a modified example from <a href="http://learnyouahaskell.com/for-a-few-monads-more">Learn You a Haskell for Great good</a>. To log the process of deriving the greatest common divisor, we can do this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">import</span> <span class="nn">Control.Monad.Writer</span>
</span><span class="line">
</span><span class="line"><span class="nf">gcd&#39;</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Writer</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span>
</span><span class="line"><span class="nf">gcd&#39;</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
</span><span class="line">    <span class="o">|</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class="line">        <span class="n">tell</span> <span class="p">[</span><span class="s">&quot;Finished with &quot;</span> <span class="o">++</span> <span class="n">show</span> <span class="n">a</span><span class="p">]</span>
</span><span class="line">        <span class="n">return</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span>
</span><span class="line">    <span class="o">|</span> <span class="n">otherwise</span> <span class="ow">=</span> <span class="kr">do</span>
</span><span class="line">        <span class="n">tell</span> <span class="p">[</span><span class="n">show</span> <span class="n">a</span> <span class="o">++</span> <span class="s">&quot; mod &quot;</span> <span class="o">++</span> <span class="n">show</span> <span class="n">b</span> <span class="o">++</span> <span class="s">&quot; = &quot;</span> <span class="o">++</span> <span class="n">show</span> <span class="p">(</span><span class="n">a</span> <span class="p">`</span><span class="n">mod</span><span class="p">`</span> <span class="n">b</span><span class="p">)]</span>
</span><span class="line">        <span class="n">return</span> <span class="p">[</span><span class="n">b</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span> <span class="p">`</span><span class="n">mod</span><span class="p">`</span> <span class="n">b</span><span class="p">)]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The Writer Monad does not have a constructor like Maybe Monad does, so you need to use <code>tell</code> and <code>return</code> to build the Writer Monad and return it back. To show the result of the writer log, you’ll also need function <code>runWriter</code>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="n">runWriter</span> <span class="o">$</span> <span class="n">gcd&#39;</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</span><span class="line"><span class="p">([</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="s">&quot;8 mod 3 = 2&quot;</span><span class="p">])</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="n">runWriter</span> <span class="o">$</span> <span class="n">gcd&#39;</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;&gt;=</span> <span class="n">gcd&#39;</span>
</span><span class="line"><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="s">&quot;8 mod 3 = 2&quot;</span><span class="p">,</span><span class="s">&quot;3 mod 2 = 1&quot;</span><span class="p">])</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="n">runWriter</span> <span class="o">$</span> <span class="n">gcd&#39;</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;&gt;=</span> <span class="n">gcd&#39;</span> <span class="o">&gt;&gt;=</span> <span class="n">gcd&#39;</span>
</span><span class="line"><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="s">&quot;8 mod 3 = 2&quot;</span><span class="p">,</span><span class="s">&quot;3 mod 2 = 1&quot;</span><span class="p">,</span><span class="s">&quot;2 mod 1 = 0&quot;</span><span class="p">])</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="monad-lesson-2-the-then-operator-">Monad Lesson 2: the then operator <code>&gt;&gt;</code></h2>

<p>So, now we learned you can put different logic into a Monad to operate states. All the state passing is done by the bind operator <code>&gt;&gt;=</code>, which wraps the data and passes it to the downstream handler. However, Sometimes, we don’t care about the wrapped value and just want to pass the state downstream. For example, performing side effects.</p>

<p>The definition of <em>then</em> operator <code>&gt;&gt;</code> looks like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">class</span> <span class="kt">Monad</span> <span class="n">m</span> <span class="kr">where</span>
</span><span class="line">    <span class="p">(</span><span class="o">&gt;&gt;</span><span class="p">)</span> <span class="ow">::</span> <span class="n">m</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">b</span>
</span><span class="line">    <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span> <span class="ow">=</span> <span class="n">x</span> <span class="o">&gt;&gt;=</span> <span class="nf">\</span><span class="kr">_</span> <span class="ow">-&gt;</span> <span class="n">y</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Unlike <em>bind</em> operator <code>&gt;&gt;=</code> which unwraps the value passed between user defined functions, <em>then</em> operator ignores the wrapped value (it uses <code>_</code> as variable) and only captures the states <code>x</code> and <code>y</code>.</p>

<p>What is the use case of this? Recall that Haskell is a purely a functional language that doesn’t have states or variables; However, the Monad system can encapsulate hidden states, so the solution is to put a hidden <code>#realworld#</code> variable in <code>IO Monad</code> that records the standard input-output status, and also the file seek position, etc.</p>

<h2 id="application-3-io-monad">Application 3: IO Monad</h2>

<p>It’s easier to understand in examples. Let’s try the <code>putStrLn</code> function, which takes a <code>String</code>, and returns an <code>IO Monad</code>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="nf">putStrLn</span> <span class="ow">::</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Since it doesn’t need to take things from standard input, we have no need to <em>bind</em> variables.
The usage is trivial:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="n">putStrLn</span> <span class="s">&quot;hello, world&quot;</span>
</span><span class="line"><span class="nf">hello</span><span class="p">,</span> <span class="n">world</span>
</span><span class="line"><span class="o">*</span><span class="kt">Main</span><span class="o">&gt;</span> <span class="n">putStrLn</span> <span class="s">&quot;hello, world&quot;</span> <span class="o">&gt;&gt;</span> <span class="n">putStrLn</span> <span class="s">&quot;baby&quot;</span>
</span><span class="line"><span class="nf">hello</span><span class="p">,</span> <span class="n">world</span>
</span><span class="line"><span class="nf">baby</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>With every <code>&gt;&gt;</code> operator, the <code>IO ()</code> Monad changes the <code>#realworld#</code> variable in the background. It’s just like <code>Writer</code> Monad changes the accumulated states, but more abstract. For more details about the <code>IO ()</code> Monad, please visit <a href="http://www.haskell.org/haskellwiki/IO_inside">IO inside - HaskellWiki</a>.</p>

<h3 id="do-notation">do notation</h3>

<p>For convenience, Haskell provides us <strong>do notation</strong> to simplify the writing of <em>bind</em> and <em>then</em>, so instead of writing:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="nf">main</span> <span class="ow">=</span> <span class="n">putStr</span> <span class="s">&quot;What is your name?&quot;</span>
</span><span class="line">       <span class="o">&gt;&gt;</span> <span class="n">readLn</span>
</span><span class="line">       <span class="o">&gt;&gt;=</span> <span class="nf">\</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">putStr</span> <span class="s">&quot;How old are you?&quot;</span>
</span><span class="line">       <span class="o">&gt;&gt;</span> <span class="n">readLn</span>
</span><span class="line">       <span class="o">&gt;&gt;=</span> <span class="nf">\</span><span class="n">b</span> <span class="ow">-&gt;</span> <span class="n">print</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>you can write:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span> <span class="n">putStr</span> <span class="s">&quot;What is your name?&quot;</span>
</span><span class="line">          <span class="n">a</span> <span class="ow">&lt;-</span> <span class="n">readLn</span>
</span><span class="line">          <span class="n">putStr</span> <span class="s">&quot;How old are you?&quot;</span>
</span><span class="line">          <span class="n">b</span> <span class="ow">&lt;-</span> <span class="n">readLn</span>
</span><span class="line">          <span class="n">print</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This example is taken from <a href="http://www.haskell.org/haskellwiki/IO_inside">IO inside - HaskellWiki</a>. All the Monads above can be rewritten in this form. Hooray!</p>

<h2 id="monad-lesson-3-return-and-fail">Monad Lesson 3: <code>return</code> and <code>fail</code></h2>

<p>We only have two functions left to describe Monad, which are <code>return</code> and <code>fail</code>. Actually, we already know them! The complete <code>Maybe</code> definition is:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">instance</span>  <span class="kt">Monad</span> <span class="kt">Maybe</span>  <span class="kr">where</span>
</span><span class="line">    <span class="p">(</span><span class="kt">Just</span> <span class="n">x</span><span class="p">)</span> <span class="o">&gt;&gt;=</span> <span class="n">k</span>      <span class="ow">=</span> <span class="n">k</span> <span class="n">x</span>
</span><span class="line">    <span class="kt">Nothing</span>  <span class="o">&gt;&gt;=</span> <span class="kr">_</span>      <span class="ow">=</span> <span class="kt">Nothing</span>
</span><span class="line">
</span><span class="line">    <span class="p">(</span><span class="kt">Just</span> <span class="kr">_</span><span class="p">)</span> <span class="o">&gt;&gt;</span>  <span class="n">k</span>      <span class="ow">=</span> <span class="n">k</span>
</span><span class="line">    <span class="kt">Nothing</span>  <span class="o">&gt;&gt;</span>  <span class="kr">_</span>      <span class="ow">=</span> <span class="kt">Nothing</span>
</span><span class="line">
</span><span class="line">    <span class="n">return</span>              <span class="ow">=</span> <span class="kt">Just</span>
</span><span class="line">    <span class="n">fail</span> <span class="kr">_</span>              <span class="ow">=</span> <span class="kt">Nothing</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The <code>return</code> function is the wrapper that we have used so far, and <code>fail</code> is the function to represent, as you can guess, failure. The definition of <code>return</code> and <code>fail</code> in Monad is:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="kr">class</span> <span class="kt">Monad</span> <span class="n">m</span> <span class="kr">where</span>
</span><span class="line">  <span class="n">return</span> <span class="ow">::</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">a</span>
</span><span class="line">  <span class="n">fail</span> <span class="ow">::</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">a</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>fail</code> can take an additional string to report the failure message. With <em>bind</em>, <em>then</em>, <em>return</em>, and <em>fali</em> functions, we then know the whole definition of the Monad type!</p>

<h2 id="monad-lesson-4-beyond-states">Monad Lesson 4: Beyond states</h2>

<p>So far, we introduced <code>Maybe</code>, <code>Writer</code>, and <code>IO ()</code> Monads which use states heavily, but Monad can do more than abstract states. Remember, the core of Monad type is to wrap around logic. One of the applications it can do is define work flow. Here comes the <a href="http://chimera.labs.oreilly.com/books/1230000000929/ch02.html#fig_rpar_rpar">Eval Monad</a> to the rescue; let’s take a look on the example in the online book:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="hs"><span class="line"><span class="nf">runEval</span> <span class="o">$</span> <span class="kr">do</span>
</span><span class="line">   <span class="n">a</span> <span class="ow">&lt;-</span> <span class="n">rpar</span> <span class="p">(</span><span class="n">f</span> <span class="n">x</span><span class="p">)</span>
</span><span class="line">   <span class="n">b</span> <span class="ow">&lt;-</span> <span class="n">rpar</span> <span class="p">(</span><span class="n">f</span> <span class="n">y</span><span class="p">)</span>
</span><span class="line">   <span class="n">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Once you wrap the function <code>f</code> in <code>Eval</code> Monad, it generates the logic to evaluate the code in parallel. You can further use the combination of the <code>rpar</code> and <code>rseq</code> functions defined by <code>Eval</code>, to construct the dependencies of each individual job. Check the link for more details!</p>

<p>Another nontrivial example of Monad is <a href="http://www.haskell.org/haskellwiki/Parsec">Parsec parser combinator library</a>. In this case, the wrapped logic is used for generating a parser from smaller components. Read <a href="http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours">Write Yourself a Scheme in 48 hours</a> to explore this decent Monad!</p>

<h2 id="conclusion">Conclusion</h2>

<p>I started to learn Haskell a while ago, but I found explaining what a Monad type is in a easy way was extremely difficult. The final approach I choose was to break it down into four functions and explore them through examples. 
I found this helped me understand it better, and I hope it helps you out as well!</p>

<p>Once you understand what the Monad type is, you can easily use for all sorts of Haskell libraries on the fly. In the Haskell world, Monad is THE design pattern that is used for almost every important library. Functional programming introduced a different way to convolute the logic and data. It’s also elegant and powerful. I hope you enjoyed reading this post!</p>

<p>Any comments are welcome. ;)</p>

<h2 id="references">References</h2>

<ul>
  <li>
    <p><a href="http://www.leonardoborges.com/writings/2012/12/08/monads-in-small-bites-part-iv-monads/">Monads in small bites</a></p>
  </li>
  <li>
    <p><a href="http://www.haskell.org/haskellwiki/IO_inside">IO inside - HaskellWiki</a></p>
  </li>
  <li>
    <p><a href="http://learnyouahaskell.com/for-a-few-monads-more">Learn You a Haskell for Great good</a></p>
  </li>
  <li>
    <p><a href="http://chimera.labs.oreilly.com/books/1230000000929/ch02.html#fig_rpar_rpar">Eval Monad</a></p>
  </li>
  <li>
    <p><a href="http://www.haskell.org/haskellwiki/Parsec">Parsec parser combinator library</a></p>
  </li>
  <li>
    <p><a href="http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours">Write Yourself a Scheme in 48 hours</a></p>
  </li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">dryman (Felix Ren-Chyan Chern)</span></span>

      








  


<time datetime="2014-01-23T19:21:00-08:00" pubdate data-updated="true">Jan 23<span>rd</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/haskell/'>Haskell</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.idryman.org/blog/2014/01/23/yet-another-monad-tutorial/" data-via="idryman" data-counturl="http://www.idryman.org/blog/2014/01/23/yet-another-monad-tutorial/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/2013/10/03/convert-uf8-literals-in-java/" title="Previous Post: Convert utf8 literals in Java">&laquo; Convert utf8 literals in Java</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/2014/01/26/capture-directory-context-in-hadoop-mapper/" title="Next Post: Capture directory context in Hadoop Mapper">Capture directory context in Hadoop Mapper &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/26/setting-up-jasper-server-on-linux/">Setting up Jasper Server on Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/27/capture-path-info-in-hadoop-inputformat-class/">Capture path info in hadoop InputFormat class</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/26/capture-directory-context-in-hadoop-mapper/">Capture directory context in Hadoop Mapper</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/23/yet-another-monad-tutorial/">Yet Another Monad Tutorial in 15 Minutes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/03/convert-uf8-literals-in-java/">Convert utf8 literals in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/28/java-fast-io-using-java-nio-api/">Java fast IO using java.nio API</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/22/process-small-files-on-hadoop-using-combinefileinputformat-2/">Process Small Files on Hadoop using CombineFileInputFormat (2)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/22/process-small-files-on-hadoop-using-combinefileinputformat-1/">Process Small Files on Hadoop using CombineFileInputFormat (1)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/29/my-emacs-setting-on-servers/">my emacs setting on servers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/16/minimal-nodejs-router/">Minimal NodeJS router</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("idryman", 4, true);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/idryman" class="twitter-follow-button" data-show-count="false">Follow @idryman</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - dryman (Felix Ren-Chyan Chern) -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dryblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.idryman.org/blog/2014/01/23/yet-another-monad-tutorial/';
        var disqus_url = 'http://www.idryman.org/blog/2014/01/23/yet-another-monad-tutorial/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<!--
hn like button plugin for jekyll/octopress
Author: dryman (Felix Ren-Chyan Chern)

Inpired from http://hnlike.com/ written by sbashyal

(The MIT License)

Copyright © 2012-2013 Felix Ren-Chyan Chern

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the ‘Software’), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
of the Software, and to permit persons to whom the Software is furnished to do
so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED ‘AS IS’, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->
  <script type="text/javascript">
    (function(){
      var hn_like = document.createElement('iframe');
      hn_like.frameborder="no";
      hn_like.scrolling="no";
      hn_like.height="28px";
      hn_like.width="115px";
      hn_like.src = "http://hnlike.com/upvote.php?link="
                    + encodeURIComponent(document.location)
                    + "&title="
                    + encodeURIComponent("Yet Another Monad Tutorial in 15 Minutes");
      hn_like.innerHTML="iframes not supported by your browser";
      var twitter = document.getElementsByClassName("twitter-share-button")[0];

      twitter.parentNode.insertBefore(
        hn_like,
        twitter
      );
    })();
  </script>

<!-- end of hn like button -->




<script type="text/javascript">
 $(function() {
        /* For zebra striping */
        $("table tr:nth-child(odd)").addClass("odd-row");
        /* For cell text alignment */
        $("table td:first-child, table th:first-child").addClass("first");
        /* For removing the last border */
        $("table td:last-child, table th:last-child").addClass("last");
});
</script>


</body>
</html>
